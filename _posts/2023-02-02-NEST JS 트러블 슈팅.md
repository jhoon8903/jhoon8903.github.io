---
title: NEST JS íŠ¸ëŸ¬ë¸” ìŠˆíŒ…1
category: íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
author: "ì´ì •í›ˆ"
tags: [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…, nestJS]
img : ":k8j6KmS.png"
comments_disable: true
meta_description: "NEST JS íŠ¸ëŸ¬ë¸” ìŠˆíŒ…1-EntityRepository"
---

ğŸš¨ typeorm 0.3 ë²„ì „ ì´í›„ë¡œ ì—†ì–´ì§„ EntityRepository ....
	ê°•ì˜ë¥¼ ë”°ë¼ ê¸°ì´ˆ nestjs ê³µë¶€ì¤‘ ì²«ë²ˆì§¸ íŠ¸ëŸ¬ë¸”ì— ë´‰ì°©...
	![](https://i.imgur.com/TkEtwvk.png)

![](https://i.imgur.com/k8j6KmS.png)

EntityRepository ë¼ëŠ”ê²Œ deprecated ë¼ê³  í•œë‹¤.. 
ê°•ì˜ì—ì„œëŠ” ì˜ ë˜ë˜ë°...
  
'Entity Repository'ëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ....ì‚¬ìš© ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤....

ì´ì œ ë§‰ ì‹œì‘í•œ ì‚¬ëŒì—ê²Œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•˜ë©´,,,

ê²€ìƒ‰ì„ ì‹œì‘í•˜ë‹ˆ ë‚˜ë§Œ ê²ªëŠ” ë¬¸ì œê°€ ì•„ë‹ˆì—ˆë‹¤.
[ì°¸ì¡° ë¸”ë¡œê·¸ - í…Œí¬ë†€ë¦¬ì§€ë„¥](https://velog.io/@pk3669/typeorm-0.3.x-EntityRepository-%EB%8F%8C%EB%A0%A4%EC%A4%98)

í•´ë‹¹ê¸€ì„ ì½ì–´ë„, ë‹¤ì´ë‚˜ë¯¹ ëª¨ë“ˆ, ë©”íƒ€ë°ì´í„°, ë°ì½”ë ˆì´í„° ì œì‘ íŒ¨í„´ ë“±ë“±.....
1ë„ ëª¨ë¥´ê² ëŠ” ê°œë…ë“¤ì´ ë‚˜ë¥¼ ë°˜ê¸´ë‹¤.

ëˆˆì¹˜ëŠ” ìˆì–´ ì½”ë“œë¥¼ ë³´ê³  ì–´ë””ë‹¤ ë¶™ì—¬ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ê°ì€ ìˆì–´ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ ë‚˜ì—ê²Œ ë§ëŠ” ìœ„ì¹˜ì— ë¶™ì—¬ë„£ì–´ ì‘ë™ì€ ë˜ê²Œ í•˜ì˜€ëŠ”ë°, ì´ê±´ ë¶™ì¡ê³  ê¹Šê²Œ ê³µë¶€í•´ì•¼í•  ë¶€ë¶„ ì¸ê²ƒ ê°™ë‹¤.

ë¶™ì—¬ë„£ì€ ì½”ë“œì˜ ì „ë¬¸ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```ts
// typeorm-ex.module.ts

import { DynamicModule, Provider } from "@nestjs/common";
import { getDataSourceToken } from "@nestjs/typeorm";
import { DataSource } from "typeorm";
import { TYPEORM_EX_CUSTOM_REPOSITORY } from "./typeorm-ex.decorator";

export class TypeOrmExModule {
  public static forCustomRepository<T extends new (...args: any[]) => any>(repositories: T[]): DynamicModule {
    const providers: Provider[] = [];

    for (const repository of repositories) {
      const entity = Reflect.getMetadata(TYPEORM_EX_CUSTOM_REPOSITORY, repository);

      if (!entity) {
        continue;
      }

      providers.push({
        inject: [getDataSourceToken()],
        provide: repository,
        useFactory: (dataSource: DataSource): typeof repository => {
          const baseRepository = dataSource.getRepository<any>(entity);
          return new repository(baseRepository.target, baseRepository.manager, baseRepository.queryRunner);
        },
      });
    }

    return {
      exports: providers,
      module: TypeOrmExModule,
      providers,
    };
  }
}
```
[ì°¸ì¡° ë¸”ë¡œê·¸ - í…Œí¬ë†€ë¦¬ì§€ë„¥](https://velog.io/@pk3669/typeorm-0.3.x-EntityRepository-%EB%8F%8C%EB%A0%A4%EC%A4%98)

ğŸš¨ ë‘ë²ˆì§¸ íŠ¸ëŸ¬ë¸” 
	íšŒì›ê°€ì… ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ”ë° dbì— PKë§Œ ìƒì„± ë˜ê³ , ë‚˜ë¨¸ì§€ keyë“¤ì´ ìƒì„±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ..
	
![](https://i.imgur.com/5blF9n8.png)

ê²°êµ­ í•´ê²°ì€ í•˜ì˜€ëŠ”ë° ì™œ ì´ëŸ°ê±´ì§€ëŠ” ëª¨ë¥´ê² ê³ , ëˆ„êµ°ê°€ì—ê²Œ ë¬¼ì–´ì„œ ì•Œì•„ë³´ë„ë¡ í•´ì•¼ê² ë‹¤.

í•´ê²°ì€ ì½˜ì†”ì„ ì´ë¦¬ì €ë¦¬ ì°ë‹¤ê°€. ì»¨íŠ¸ë¡¤ì¸µì˜ dtoì—ì„œë„ ì½˜ì†”ì´ ì°íˆì§€ ì•Šì•„.
dtoë¥¼ ì˜ì‹¬ dtoì— @IsNotEmpty ë¼ëŠ” class-validatorì„ ì…ë ¥í•˜ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

```ts
export class AuthCredentialDto {
username : string
password : string
}
```

```ts
import { IsNotEmpty } from 'class-validator'

export class AuthCredentialDto {

@IsNotEmpty()
username : string

@IsNotEmpty()
password : string
}
```

nest ì²«ë‚ ë¶€í„° ì• ë§¤í•œ ë²„ê·¸ë“¤ì´ í˜ë“¤ê²Œ í•˜ë„¤...